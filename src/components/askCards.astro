---
const { ask, answer } = Astro.props;
---

<div
  class="faq-item border-2 border-[#262626] rounded-xl overflow-hidden transition-all duration-300"
>
  <!-- Header Container -->
  <button
    class="faq-header w-full p-5 bg-[#D9FFA1] rounded-t-xl flex items-start justify-between gap-4 text-left hover:bg-[#ccf090] transition-colors"
  >
    <h3 class="text-[#262626] font-semibold text-lg leading-tight flex-1">
      {ask}
    </h3>
    <div
      class="faq-icon w-10 h-10 rounded-lg bg-[#00AEEF] flex items-center justify-center flex-shrink-0 transition-transform duration-300"
    >
      <svg
        class="w-6 h-6 text-white"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="3"
          d="M12 4v16m8-8H4"></path>
      </svg>
    </div>
  </button>

  <!-- Body Container -->
  <div class="faq-body max-h-0 overflow-hidden transition-all duration-300">
    <div class="h-0.5 bg-[#262626] mx-5"></div>
    <div class="p-5 bg-white">
      <p class="text-[#333333] font-medium leading-relaxed">{answer}</p>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const faqItems = document.querySelectorAll(".faq-item");

    faqItems.forEach((item) => {
      const header = item.querySelector(".faq-header");
      const body = item.querySelector(".faq-body") as HTMLElement;
      const icon = item.querySelector(".faq-icon");

      header?.addEventListener("click", () => {
        const isOpen = body?.style.maxHeight && body.style.maxHeight !== "0px";

        if (isOpen) {
          // Cerrar
          if (body) body.style.maxHeight = "0px";
          icon?.classList.remove("rotate-45");
        } else {
          // Abrir
          if (body) {
            body.style.maxHeight = body.scrollHeight + "px";
          }
          icon?.classList.add("rotate-45");
        }
      });
    });
  });
</script>
